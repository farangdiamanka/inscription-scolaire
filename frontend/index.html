<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Système d'Inscription et Réinscription Scolaire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f7fa;
            color: #2c3e50;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .tab:hover {
            background: #f8f9fa;
            border-color: #3498db;
        }

        .tab.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .form-section h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #555;
        }

        .required {
            color: #e74c3c;
            margin-left: 4px;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .radio-group,
        .checkbox-group {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .radio-label,
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        input[type="radio"],
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .service-card {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .service-card:hover {
            border-color: #3498db;
            background: #f8f9fa;
        }

        .service-card.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .service-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .service-title {
            font-weight: 600;
            color: #2c3e50;
        }

        .service-price {
            color: #3498db;
            font-weight: 600;
        }

        .service-details {
            display: none;
            margin-top: 1rem;
        }

        .service-card.selected .service-details {
            display: block;
        }

        .payment-summary {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .payment-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .payment-total {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            border-top: 2px solid #e0e0e0;
            padding-top: 0.5rem;
            margin-top: 1rem;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            justify-content: flex-end;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .progress-step {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            z-index: 2;
            position: relative;
        }

        .progress-step.active {
            border-color: #3498db;
            background: #3498db;
            color: white;
        }

        .progress-step.completed {
            border-color: #27ae60;
            background: #27ae60;
            color: white;
        }

        .alert {
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .alert-info {
            background: #e3f2fd;
            border: 1px solid #1976d2;
            color: #1976d2;
        }

        .alert-success {
            background: #e8f5e9;
            border: 1px solid #4caf50;
            color: #2e7d32;
        }

        .alert-warning {
            background: #fff3e0;
            border: 1px solid #ff9800;
            color: #e65100;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 600;
            color: #3498db;
        }

        .stat-label {
            color: #7f8c8d;
            margin-top: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .status-active {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-pending {
            background: #fff3e0;
            color: #e65100;
        }

        .status-inactive {
            background: #ffebee;
            color: #c62828;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Système d'Inscription et Réinscription</h1>
            <p class="subtitle">Année Scolaire 2024-2025</p>
        </header>

        <div class="tabs">
            <div class="tab active" onclick="showTab('inscription')">Nouvelle Inscription</div>
            <div class="tab" onclick="showTab('reinscription')">Réinscription</div>
            <div class="tab" onclick="showTab('dashboard')">Tableau de Bord</div>
            <div class="tab" onclick="showTab('recherche')">Recherche</div>
        </div>

        <div id="inscription" class="content">
            <div class="progress-bar">
                <div class="progress-step active">1</div>
                <div class="progress-step">2</div>
                <div class="progress-step">3</div>
                <div class="progress-step">4</div>
            </div>

            <form id="inscriptionForm">
                <div id="step1" class="form-step">
                    <div class="form-section">
                        <h3>Informations de l'Élève</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Prénom <span class="required">*</span></label>
                                <input type="text" name="prenom" required>
                            </div>
                            <div class="form-group">
                                <label>Nom <span class="required">*</span></label>
                                <input type="text" name="nom" required>
                            </div>
                            <div class="form-group">
                                <label>Date de Naissance <span class="required">*</span></label>
                                <input type="date" name="dateNaissance" required>
                            </div>
                            <div class="form-group">
                                <label>Sexe <span class="required">*</span></label>
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="sexe" value="M" required> Masculin
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="sexe" value="F" required> Féminin
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Nationalité <span class="required">*</span></label>
                                <input type="text" name="nationalite" value="Sénégalaise" required>
                            </div>
                            <div class="form-group">
                                <label>Lieu de Naissance</label>
                                <input type="text" name="lieuNaissance">
                            </div>
                            <div class="form-group">
                                <label>Niveau d'Inscription <span class="required">*</span></label>
                                <select name="niveau" required onchange="updateFrais()">
                                    <option value="">-- Sélectionner --</option>
                                    <optgroup label="Préscolaire">
                                        <option value="PPS">PPS (Petite Petite Section)</option>
                                        <option value="PS">PS (Petite Section)</option>
                                        <option value="MS">MS (Moyenne Section)</option>
                                        <option value="GS">GS (Grande Section)</option>
                                    </optgroup>
                                    <optgroup label="Élémentaire">
                                        <option value="CI">CI (Cours d'Initiation)</option>
                                        <option value="CP">CP (Cours Préparatoire)</option>
                                        <option value="CE1">CE1</option>
                                        <option value="CE2">CE2</option>
                                        <option value="CM1">CM1</option>
                                        <option value="CM2">CM2</option>
                                    </optgroup>
                                    <optgroup label="Collège">
                                        <option value="6eme">6ème</option>
                                        <option value="5eme">5ème</option>
                                        <option value="4eme">4ème</option>
                                        <option value="3eme">3ème</option>
                                    </optgroup>
                                    <optgroup label="Lycée">
                                        <option value="2nd">2nd</option>
                                    </optgroup>
                                    <optgroup label="Spécial">
                                        <option value="Hifz">Hifz (Mémorisation du Coran)</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>École Précédente</label>
                                <input type="text" name="ecolePrecedente">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step2" class="form-step" style="display: none;">
                    <div class="form-section">
                        <h3>Informations des Parents/Tuteurs</h3>
                        
                        <h4 style="margin-bottom: 1rem;">Parent 1 / Tuteur Principal</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nom Complet <span class="required">*</span></label>
                                <input type="text" name="parent1_nom" required>
                            </div>
                            <div class="form-group">
                                <label>Téléphone <span class="required">*</span></label>
                                <input type="tel" name="parent1_telephone" required>
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" name="parent1_email">
                            </div>
                            <div class="form-group">
                                <label>Profession</label>
                                <input type="text" name="parent1_profession">
                            </div>
                            <div class="form-group">
                                <label>Adresse <span class="required">*</span></label>
                                <input type="text" name="parent1_adresse" required>
                            </div>
                            <div class="form-group">
                                <label>Relation avec l'élève <span class="required">*</span></label>
                                <select name="parent1_relation" required>
                                    <option value="">-- Sélectionner --</option>
                                    <option value="pere">Père</option>
                                    <option value="mere">Mère</option>
                                    <option value="tuteur">Tuteur/Tutrice</option>
                                    <option value="autre">Autre</option>
                                </select>
                            </div>
                        </div>

                        <h4 style="margin: 2rem 0 1rem;">Parent 2 (Optionnel)</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nom Complet</label>
                                <input type="text" name="parent2_nom">
                            </div>
                            <div class="form-group">
                                <label>Téléphone</label>
                                <input type="tel" name="parent2_telephone">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" name="parent2_email">
                            </div>
                            <div class="form-group">
                                <label>Profession</label>
                                <input type="text" name="parent2_profession">
                            </div>
                        </div>

                        <h4 style="margin: 2rem 0 1rem;">Contact d'Urgence</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nom <span class="required">*</span></label>
                                <input type="text" name="urgence_nom" required>
                            </div>
                            <div class="form-group">
                                <label>Téléphone <span class="required">*</span></label>
                                <input type="tel" name="urgence_telephone" required>
                            </div>
                            <div class="form-group">
                                <label>Relation</label>
                                <input type="text" name="urgence_relation">
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step3" class="form-step" style="display: none;">
                    <div class="form-section">
                        <h3>Services Complémentaires</h3>
                        
                        <div class="services-grid">
                            <div class="service-card" onclick="toggleService(this, 'transport')">
                                <div class="service-header">
                                    <span class="service-title">Transport Scolaire</span>
                                    <span class="service-price">10 000 FCFA/mois</span>
                                </div>
                                <p>Transport aller-retour sécurisé</p>
                                <div class="service-details">
                                    <div class="form-group">
                                        <label>Zone de Ramassage</label>
                                        <select name="transport_zone">
                                            <option value="">-- Sélectionner --</option>
                                            <option value="zone1">Zone 1 - Centre Ville</option>
                                            <option value="zone2">Zone 2 - Banlieue Proche</option>
                                            <option value="zone3">Zone 3 - Banlieue Éloignée</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Adresse de Ramassage</label>
                                        <input type="text" name="transport_adresse">
                                    </div>
                                </div>
                            </div>

                            <div class="service-card" onclick="toggleService(this, 'cantine')">
                                <div class="service-header">
                                    <span class="service-title">Cantine</span>
                                    <span class="service-price">15 000 FCFA/mois</span>
                                </div>
                                <p>Repas équilibrés midi et goûter</p>
                                <div class="service-details">
                                    <div class="form-group">
                                        <label>Régime Alimentaire</label>
                                        <select name="cantine_regime">
                                            <option value="normal">Normal</option>
                                            <option value="sans_porc">Sans Porc</option>
                                            <option value="vegetarien">Végétarien</option>
                                            <option value="autre">Autre (préciser)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Allergies Alimentaires</label>
                                        <textarea name="cantine_allergies" rows="3"></textarea>
                                    </div>
                                </div>
                            </div>

                            <div class="service-card" onclick="toggleService(this, 'taekwondo')">
                                <div class="service-header">
                                    <span class="service-title">Taekwondo</span>
                                    <span class="service-price">5 000 FCFA/mois</span>
                                </div>
                                <p>Cours 2 fois par semaine</p>
                                <div class="service-details">
                                    <div class="form-group">
                                        <label>Niveau</label>
                                        <select name="taekwondo_niveau">
                                            <option value="debutant">Débutant</option>
                                            <option value="intermediaire">Intermédiaire</option>
                                            <option value="avance">Avancé</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="service-card" onclick="toggleService(this, 'fournitures')">
                                <div class="service-header">
                                    <span class="service-title">Pack Fournitures</span>
                                    <span class="service-price">25 000 FCFA</span>
                                </div>
                                <p>Kit complet adapté au niveau</p>
                                <div class="service-details">
                                    <div class="form-group">
                                        <label>Options supplémentaires</label>
                                        <div class="checkbox-group" style="flex-direction: column; align-items: flex-start;">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="fournitures_calculatrice" value="5000">
                                                Calculatrice scientifique (+5 000 FCFA)
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="fournitures_tablier" value="3000">
                                                Tablier laboratoire (+3 000 FCFA)
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-section" style="margin-top: 2rem;">
                            <h4>Informations Médicales</h4>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Groupe Sanguin</label>
                                    <select name="groupe_sanguin">
                                        <option value="">-- Sélectionner --</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Conditions Médicales Particulières</label>
                                    <textarea name="conditions_medicales" rows="3" placeholder="Asthme, diabète, épilepsie, etc."></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Médicaments Réguliers</label>
                                    <textarea name="medicaments" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label>Médecin Traitant</label>
                                    <input type="text" name="medecin_nom" placeholder="Nom et téléphone">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step4" class="form-step" style="display: none;">
                    <div class="form-section">
                        <h3>Paiement et Finalisation</h3>
                        
                        <div class="payment-summary">
                            <h4>Récapitulatif des Frais</h4>
                            <div id="fraisDetails">
                                <div class="payment-line">
                                    <span>Frais d'inscription:</span>
                                    <span id="fraisInscription">30 000 FCFA</span>
                                </div>
                                <div class="payment-line">
                                    <span>Première mensualité:</span>
                                    <span id="fraisMensualite">0 FCFA</span>
                                </div>
                                <div class="payment-line" id="transportLine" style="display: none;">
                                    <span>Transport (1er mois):</span>
                                    <span>10 000 FCFA</span>
                                </div>
                                <div class="payment-line" id="cantineLine" style="display: none;">
                                    <span>Cantine (1er mois):</span>
                                    <span>15 000 FCFA</span>
                                </div>
                                <div class="payment-line" id="taekwondoLine" style="display: none;">
                                    <span>Taekwondo (1er mois):</span>
                                    <span>5 000 FCFA</span>
                                </div>
                                <div class="payment-line" id="fournituresLine" style="display: none;">
                                    <span>Pack Fournitures:</span>
                                    <span id="fournituresTotal">25 000 FCFA</span>
                                </div>
                                <div class="payment-total">
                                    <span>Total à Payer:</span>
                                    <span id="totalPayer">30 000 FCFA</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-section" style="margin-top: 2rem;">
                            <h4>Mode de Paiement</h4>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label>Méthode de Paiement <span class="required">*</span></label>
                                    <select name="mode_paiement" required onchange="updatePaymentFields()">
                                        <option value="">-- Sélectionner --</option>
                                        <option value="especes">Espèces</option>
                                        <option value="cheque">Chèque</option>
                                        <option value="virement">Virement Bancaire</option>
                                        <option value="mobile">Mobile Money</option>
                                    </select>
                                </div>
                                <div id="paymentDetails"></div>
                            </div>
                        </div>

                        <div class="form-section" style="margin-top: 2rem;">
                            <h4>Documents à Fournir</h4>
                            <div class="alert alert-info">
                                Veuillez préparer les documents suivants pour finaliser l'inscription:
                            </div>
                            <div class="checkbox-group" style="flex-direction: column; align-items: flex-start; gap: 0.8rem;">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="doc_extrait" required>
                                    Extrait de naissance de l'élève
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="doc_photos" required>
                                    4 photos d'identité récentes
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="doc_carnet" required>
                                    Carnet de vaccination
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="doc_certificat">
                                    Certificat de scolarité (si applicable)
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="doc_bulletin">
                                    Derniers bulletins scolaires (si applicable)
                                </label>
                            </div>
                        </div>

                        <div class="form-section" style="margin-top: 2rem;">
                            <h4>Conditions et Engagement</h4>
                            <div class="checkbox-group" style="flex-direction: column; align-items: flex-start; gap: 0.8rem;">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="reglement" required>
                                    J'ai lu et j'accepte le règlement intérieur de l'établissement
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="exactitude" required>
                                    Je certifie l'exactitude des informations fournies
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="autorisation_image">
                                    J'autorise l'utilisation de l'image de mon enfant pour les activités scolaires
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="previousStep()" id="prevBtn" style="display: none;">Précédent</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()" id="nextBtn">Suivant</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn" style="display: none;">Finaliser l'Inscription</button>
                </div>
            </form>
        </div>

        <div id="reinscription" class="content" style="display: none;">
            <div class="form-section">
                <h3>Recherche de l'Élève</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Numéro Matricule</label>
                        <input type="text" id="searchMatricule" placeholder="Ex: 240001">
                    </div>
                    <div class="form-group">
                        <label>Ou rechercher par Nom</label>
                        <input type="text" id="searchNom" placeholder="Nom de famille">
                    </div>
                    <div class="form-group" style="display: flex; align-items: flex-end;">
                        <button type="button" class="btn btn-primary" onclick="searchStudent()">Rechercher</button>
                    </div>
                </div>
            </div>

            <div id="studentInfo" style="display: none;">
                <div class="alert alert-success">
                    Élève trouvé ! Vérifiez et mettez à jour les informations ci-dessous.
                </div>
                
                <div class="form-section">
                    <h3>Informations de l'Élève</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Matricule</label>
                            <input type="text" id="reinsc_matricule" readonly>
                        </div>
                        <div class="form-group">
                            <label>Nom et Prénom</label>
                            <input type="text" id="reinsc_nom" readonly>
                        </div>
                        <div class="form-group">
                            <label>Niveau Actuel</label>
                            <input type="text" id="reinsc_niveau_actuel" readonly>
                        </div>
                        <div class="form-group">
                            <label>Nouveau Niveau <span class="required">*</span></label>
                            <select id="reinsc_nouveau_niveau" required>
                                <!-- Options will be populated dynamically -->
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Mise à jour des Services</h3>
                    <div class="services-grid">
                        <!-- Services will be populated based on current subscriptions -->
                    </div>
                </div>

                <div class="payment-summary">
                    <h4>Frais de Réinscription</h4>
                    <div class="payment-line">
                        <span>Frais de réinscription:</span>
                        <span>20 000 FCFA</span>
                    </div>
                    <div class="payment-line">
                        <span>Première mensualité:</span>
                        <span id="reinsc_mensualite">0 FCFA</span>
                    </div>
                    <div class="payment-total">
                        <span>Total:</span>
                        <span id="reinsc_total">20 000 FCFA</span>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="cancelReinscription()">Annuler</button>
                    <button type="button" class="btn btn-primary" onclick="confirmReinscription()">Confirmer la Réinscription</button>
                </div>
            </div>
        </div>

        <div id="dashboard" class="content" style="display: none;">
            <div class="dashboard">
                <div class="stat-card">
                    <div class="stat-value">439</div>
                    <div class="stat-label">Total Inscrits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">76</div>
                    <div class="stat-label">Nouvelles Inscriptions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">207</div>
                    <div class="stat-label">Filles</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">194</div>
                    <div class="stat-label">Garçons</div>
                </div>
            </div>

            <div class="form-section">
                <h3>Statistiques par Niveau</h3>
                <canvas id="statsChart" width="400" height="200"></canvas>
            </div>

            <div class="form-section">
                <h3>Dernières Inscriptions</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Matricule</th>
                            <th>Nom</th>
                            <th>Niveau</th>
                            <th>Date</th>
                            <th>Statut</th>
                        </tr>
                    </thead>
                    <tbody id="recentInscriptions">
                        <!-- Will be populated dynamically -->
                    </tbody>
                </table>
            </div>
        </div>

        <div id="recherche" class="content" style="display: none;">
            <div class="form-section">
                <h3>Recherche Avancée</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Matricule</label>
                        <input type="text" id="search_matricule">
                    </div>
                    <div class="form-group">
                        <label>Nom</label>
                        <input type="text" id="search_nom_eleve">
                    </div>
                    <div class="form-group">
                        <label>Prénom</label>
                        <input type="text" id="search_prenom">
                    </div>
                    <div class="form-group">
                        <label>Niveau</label>
                        <select id="search_niveau">
                            <option value="">Tous les niveaux</option>
                            <optgroup label="Préscolaire">
                                <option value="PPS">PPS</option>
                                <option value="PS">PS</option>
                                <option value="MS">MS</option>
                                <option value="GS">GS</option>
                            </optgroup>
                            <optgroup label="Élémentaire">
                                <option value="CI">CI</option>
                                <option value="CP">CP</option>
                                <option value="CE1">CE1</option>
                                <option value="CE2">CE2</option>
                                <option value="CM1">CM1</option>
                                <option value="CM2">CM2</option>
                            </optgroup>
                            <optgroup label="Collège">
                                <option value="6eme">6ème</option>
                                <option value="5eme">5ème</option>
                                <option value="4eme">4ème</option>
                                <option value="3eme">3ème</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Services</label>
                        <select id="search_service">
                            <option value="">Tous</option>
                            <option value="transport">Transport</option>
                            <option value="cantine">Cantine</option>
                            <option value="taekwondo">Taekwondo</option>
                        </select>
                    </div>
                    <div class="form-group" style="display: flex; align-items: flex-end;">
                        <button type="button" class="btn btn-primary" onclick="performSearch()">Rechercher</button>
                    </div>
                </div>
            </div>

            <div id="searchResults" style="display: none;">
                <div class="form-section">
                    <h3>Résultats de la Recherche</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Matricule</th>
                                <th>Nom Complet</th>
                                <th>Niveau</th>
                                <th>Parent</th>
                                <th>Téléphone</th>
                                <th>Services</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="searchResultsBody">
                            <!-- Will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // État global de l'application
        let currentStep = 1;
        let selectedServices = new Set();
        let students = JSON.parse(localStorage.getItem('students') || '[]');
        let nextMatricule = localStorage.getItem('nextMatricule') || '240440';

        // Tarifs par niveau
        const tarifs = {
            'PPS': { inscription: 30000, mensualite: 120000 },
            'PS': { inscription: 30000, mensualite: 120000 },
            'MS': { inscription: 30000, mensualite: 120000 },
            'GS': { inscription: 30000, mensualite: 120000 },
            'CI': { inscription: 30000, mensualite: 130000 },
            'CP': { inscription: 30000, mensualite: 130000 },
            'CE1': { inscription: 30000, mensualite: 130000 },
            'CE2': { inscription: 30000, mensualite: 130000 },
            'CM1': { inscription: 30000, mensualite: 130000 },
            'CM2': { inscription: 30000, mensualite: 130000 },
            '6eme': { inscription: 30000, mensualite: 140000 },
            '5eme': { inscription: 30000, mensualite: 140000 },
            '4eme': { inscription: 30000, mensualite: 140000 },
            '3eme': { inscription: 30000, mensualite: 140000 },
            '2nd': { inscription: 30000, mensualite: 150000 },
            'Hifz': { inscription: 30000, mensualite: 100000 }
        };

        // Fonction pour afficher un onglet
        function showTab(tabName) {
            // Masquer tous les contenus
            document.querySelectorAll('.content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Retirer la classe active de tous les onglets
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher le contenu sélectionné
            document.getElementById(tabName).style.display = 'block';
            
            // Activer l'onglet sélectionné
            event.target.classList.add('active');
            
            // Initialiser le tableau de bord si nécessaire
            if (tabName === 'dashboard') {
                updateDashboard();
            }
        }

        // Gestion des étapes du formulaire
        function nextStep() {
            if (validateStep(currentStep)) {
                document.getElementById(`step${currentStep}`).style.display = 'none';
                currentStep++;
                document.getElementById(`step${currentStep}`).style.display = 'block';
                updateProgressBar();
                updateButtons();
                
                if (currentStep === 4) {
                    updatePaymentSummary();
                }
            }
        }

        function previousStep() {
            document.getElementById(`step${currentStep}`).style.display = 'none';
            currentStep--;
            document.getElementById(`step${currentStep}`).style.display = 'block';
            updateProgressBar();
            updateButtons();
        }

        function updateProgressBar() {
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                if (index < currentStep - 1) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (index === currentStep - 1) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
        }

        function updateButtons() {
            document.getElementById('prevBtn').style.display = currentStep === 1 ? 'none' : 'block';
            document.getElementById('nextBtn').style.display = currentStep === 4 ? 'none' : 'block';
            document.getElementById('submitBtn').style.display = currentStep === 4 ? 'block' : 'none';
        }

        function validateStep(step) {
            const currentStepElement = document.getElementById(`step${step}`);
            const requiredFields = currentStepElement.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#e0e0e0';
                }
            });
            
            if (!isValid) {
                alert('Veuillez remplir tous les champs obligatoires.');
            }
            
            return isValid;
        }

        // Gestion des services
        function toggleService(card, service) {
            card.classList.toggle('selected');
            
            if (card.classList.contains('selected')) {
                selectedServices.add(service);
            } else {
                selectedServices.delete(service);
            }
            
            updatePaymentSummary();
        }

        // Mise à jour des frais
        function updateFrais() {
            const niveau = document.querySelector('[name="niveau"]').value;
            if (niveau && tarifs[niveau]) {
                document.getElementById('fraisMensualite').textContent = tarifs[niveau].mensualite.toLocaleString() + ' FCFA';
            }
        }

        // Mise à jour du résumé de paiement
        function updatePaymentSummary() {
            const niveau = document.querySelector('[name="niveau"]').value;
            let total = 30000; // Frais d'inscription
            
            if (niveau && tarifs[niveau]) {
                total += tarifs[niveau].mensualite;
            }
            
            // Affichage des lignes de services
            document.getElementById('transportLine').style.display = selectedServices.has('transport') ? 'flex' : 'none';
            document.getElementById('cantineLine').style.display = selectedServices.has('cantine') ? 'flex' : 'none';
            document.getElementById('taekwondoLine').style.display = selectedServices.has('taekwondo') ? 'flex' : 'none';
            document.getElementById('fournituresLine').style.display = selectedServices.has('fournitures') ? 'flex' : 'none';
            
            // Calcul du total
            if (selectedServices.has('transport')) total += 10000;
            if (selectedServices.has('cantine')) total += 15000;
            if (selectedServices.has('taekwondo')) total += 5000;
            if (selectedServices.has('fournitures')) {
                let fournituresTotal = 25000;
                if (document.querySelector('[name="fournitures_calculatrice"]')?.checked) fournituresTotal += 5000;
                if (document.querySelector('[name="fournitures_tablier"]')?.checked) fournituresTotal += 3000;
                document.getElementById('fournituresTotal').textContent = fournituresTotal.toLocaleString() + ' FCFA';
                total += fournituresTotal;
            }
            
            document.getElementById('totalPayer').textContent = total.toLocaleString() + ' FCFA';
        }

        // Gestion des champs de paiement
        function updatePaymentFields() {
            const mode = document.querySelector('[name="mode_paiement"]').value;
            const detailsDiv = document.getElementById('paymentDetails');
            
            let html = '';
            switch(mode) {
                case 'cheque':
                    html = `
                        <div class="form-group">
                            <label>Numéro de Chèque <span class="required">*</span></label>
                            <input type="text" name="cheque_numero" required>
                        </div>
                        <div class="form-group">
                            <label>Banque <span class="required">*</span></label>
                            <input type="text" name="cheque_banque" required>
                        </div>
                    `;
                    break;
                case 'virement':
                    html = `
                        <div class="form-group">
                            <label>Référence de Virement <span class="required">*</span></label>
                            <input type="text" name="virement_reference" required>
                        </div>
                    `;
                    break;
                case 'mobile':
                    html = `
                        <div class="form-group">
                            <label>Numéro de Transaction <span class="required">*</span></label>
                            <input type="text" name="mobile_transaction" required>
                        </div>
                        <div class="form-group">
                            <label>Opérateur</label>
                            <select name="mobile_operateur">
                                <option value="orange">Orange Money</option>
                                <option value="wave">Wave</option>
                                <option value="free">Free Money</option>
                            </select>
                        </div>
                    `;
                    break;
            }
            
            detailsDiv.innerHTML = html;
        }

        // Soumission du formulaire
        document.getElementById('inscriptionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateStep(4)) return;
            
            // Collecter toutes les données
            const formData = new FormData(this);
            const student = {
                matricule: nextMatricule,
                dateInscription: new Date().toISOString(),
                status: 'active',
                services: Array.from(selectedServices)
            };
            
            // Convertir FormData en objet
            for (let [key, value] of formData.entries()) {
                student[key] = value;
            }
            
            // Sauvegarder l'étudiant
            students.push(student);
            localStorage.setItem('students', JSON.stringify(students));
            
            // Incrémenter le matricule
            nextMatricule = String(parseInt(nextMatricule) + 1);
            localStorage.setItem('nextMatricule', nextMatricule);
            
            // Afficher la confirmation
            alert(`Inscription réussie!\nMatricule: ${student.matricule}\nNom: ${student.prenom} ${student.nom}`);
            
            // Réinitialiser le formulaire
            this.reset();
            currentStep = 1;
            selectedServices.clear();
            document.querySelectorAll('.form-step').forEach((step, index) => {
                step.style.display = index === 0 ? 'block' : 'none';
            });
            document.querySelectorAll('.service-card').forEach(card => {
                card.classList.remove('selected');
            });
            updateProgressBar();
            updateButtons();
        });

        // Recherche d'étudiant pour réinscription
        function searchStudent() {
            const matricule = document.getElementById('searchMatricule').value;
            const nom = document.getElementById('searchNom').value;
            
            let student = null;
            
            if (matricule) {
                student = students.find(s => s.matricule === matricule);
            } else if (nom) {
                student = students.find(s => s.nom.toLowerCase().includes(nom.toLowerCase()));
            }
            
            if (student) {
                displayStudentForReinscription(student);
            } else {
                alert('Aucun élève trouvé avec ces critères.');
            }
        }

        function displayStudentForReinscription(student) {
            document.getElementById('studentInfo').style.display = 'block';
            document.getElementById('reinsc_matricule').value = student.matricule;
            document.getElementById('reinsc_nom').value = `${student.prenom} ${student.nom}`;
            document.getElementById('reinsc_niveau_actuel').value = student.niveau;
            
            // Suggérer le niveau suivant
            const niveauSuivant = {
                'PPS': 'PS', 'PS': 'MS', 'MS': 'GS', 'GS': 'CI',
                'CI': 'CP', 'CP': 'CE1', 'CE1': 'CE2', 'CE2': 'CM1',
                'CM1': 'CM2', 'CM2': '6eme', '6eme': '5eme',
                '5eme': '4eme', '4eme': '3eme', '3eme': '2nd'
            };
            
            const select = document.getElementById('reinsc_nouveau_niveau');
            select.innerHTML = '';
            
            if (niveauSuivant[student.niveau]) {
                select.innerHTML = `<option value="${niveauSuivant[student.niveau]}" selected>${niveauSuivant[student.niveau]}</option>`;
            }
            
            // Ajouter tous les niveaux
            Object.keys(tarifs).forEach(niveau => {
                if (niveau !== niveauSuivant[student.niveau]) {
                    select.innerHTML += `<option value="${niveau}">${niveau}</option>`;
                }
            });
            
            updateReinscriptionTotal();
        }

        function updateReinscriptionTotal() {
            const niveau = document.getElementById('reinsc_nouveau_niveau').value;
            if (niveau && tarifs[niveau]) {
                document.getElementById('reinsc_mensualite').textContent = tarifs[niveau].mensualite.toLocaleString() + ' FCFA';
                const total = 20000 + tarifs[niveau].mensualite; // Frais de réinscription + mensualité
                document.getElementById('reinsc_total').textContent = total.toLocaleString() + ' FCFA';
            }
        }

        function confirmReinscription() {
            const matricule = document.getElementById('reinsc_matricule').value;
            const nouveauNiveau = document.getElementById('reinsc_nouveau_niveau').value;
            
            // Trouver et mettre à jour l'étudiant
            const studentIndex = students.findIndex(s => s.matricule === matricule);
            if (studentIndex !== -1) {
                students[studentIndex].niveau = nouveauNiveau;
                students[studentIndex].dateReinscription = new Date().toISOString();
                
                localStorage.setItem('students', JSON.stringify(students));
                
                alert(`Réinscription confirmée!\nÉlève: ${students[studentIndex].prenom} ${students[studentIndex].nom}\nNouveau niveau: ${nouveauNiveau}`);
                
                // Réinitialiser le formulaire
                document.getElementById('studentInfo').style.display = 'none';
                document.getElementById('searchMatricule').value = '';
                document.getElementById('searchNom').value = '';
            }
        }

        function cancelReinscription() {
            document.getElementById('studentInfo').style.display = 'none';
            document.getElementById('searchMatricule').value = '';
            document.getElementById('searchNom').value = '';
        }

        // Tableau de bord
        function updateDashboard() {
            // Calculer les statistiques
            const stats = {
                total: students.length,
                filles: students.filter(s => s.sexe === 'F').length,
                garcons: students.filter(s => s.sexe === 'M').length,
                nouveaux: students.filter(s => {
                    const inscDate = new Date(s.dateInscription);
                    const now = new Date();
                    return (now - inscDate) / (1000 * 60 * 60 * 24) <= 30;
                }).length
            };
            
            // Mettre à jour les cartes de statistiques
            document.querySelector('.stat-card:nth-child(1) .stat-value').textContent = stats.total;
            document.querySelector('.stat-card:nth-child(2) .stat-value').textContent = stats.nouveaux;
            document.querySelector('.stat-card:nth-child(3) .stat-value').textContent = stats.filles;
            document.querySelector('.stat-card:nth-child(4) .stat-value').textContent = stats.garcons;
            
            // Mettre à jour le tableau des dernières inscriptions
            const tbody = document.getElementById('recentInscriptions');
            tbody.innerHTML = '';
            
            const recentStudents = students.slice(-10).reverse();
            recentStudents.forEach(student => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${student.matricule}</td>
                    <td>${student.prenom} ${student.nom}</td>
                    <td>${student.niveau}</td>
                    <td>${new Date(student.dateInscription).toLocaleDateString('fr-FR')}</td>
                    <td><span class="status-badge status-active">Actif</span></td>
                `;
                tbody.appendChild(tr);
            });
            
            // Créer le graphique des statistiques par niveau
            updateStatsChart();
        }

        function updateStatsChart() {
            const canvas = document.getElementById('statsChart');
            const ctx = canvas.getContext('2d');
            
            // Compter les élèves par niveau
            const niveauCounts = {};
            students.forEach(student => {
                niveauCounts[student.niveau] = (niveauCounts[student.niveau] || 0) + 1;
            });
            
            const labels = Object.keys(niveauCounts);
            const data = Object.values(niveauCounts);
            
            // Créer un graphique simple
            const maxValue = Math.max(...data);
            const barWidth = canvas.width / labels.length;
            
            // Effacer le canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Dessiner les barres
            labels.forEach((label, index) => {
                const barHeight = (data[index] / maxValue) * (canvas.height - 40);
                const x = index * barWidth + 10;
                const y = canvas.height - barHeight - 20;
                
                // Barre
                ctx.fillStyle = '#3498db';
                ctx.fillRect(x, y, barWidth - 20, barHeight);
                
                // Label
                ctx.fillStyle = '#2c3e50';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(label, x + (barWidth - 20) / 2, canvas.height - 5);
                
                // Valeur
                ctx.fillText(data[index], x + (barWidth - 20) / 2, y - 5);
            });
        }

        // Recherche avancée
        function performSearch() {
            const criteria = {
                matricule: document.getElementById('search_matricule').value,
                nom: document.getElementById('search_nom_eleve').value,
                prenom: document.getElementById('search_prenom').value,
                niveau: document.getElementById('search_niveau').value,
                service: document.getElementById('search_service').value
            };
            
            let results = students;
            
            // Filtrer selon les critères
            if (criteria.matricule) {
                results = results.filter(s => s.matricule.includes(criteria.matricule));
            }
            if (criteria.nom) {
                results = results.filter(s => s.nom.toLowerCase().includes(criteria.nom.toLowerCase()));
            }
            if (criteria.prenom) {
                results = results.filter(s => s.prenom.toLowerCase().includes(criteria.prenom.toLowerCase()));
            }
            if (criteria.niveau) {
                results = results.filter(s => s.niveau === criteria.niveau);
            }
            if (criteria.service) {
                results = results.filter(s => s.services && s.services.includes(criteria.service));
            }
            
            displaySearchResults(results);
        }

        function displaySearchResults(results) {
            document.getElementById('searchResults').style.display = 'block';
            const tbody = document.getElementById('searchResultsBody');
            tbody.innerHTML = '';
            
            if (results.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center;">Aucun résultat trouvé</td></tr>';
                return;
            }
            
            results.forEach(student => {
                const tr = document.createElement('tr');
                const services = student.services ? student.services.join(', ') : 'Aucun';
                
                tr.innerHTML = `
                    <td>${student.matricule}</td>
                    <td>${student.prenom} ${student.nom}</td>
                    <td>${student.niveau}</td>
                    <td>${student.parent1_nom || 'N/A'}</td>
                    <td>${student.parent1_telephone || 'N/A'}</td>
                    <td>${services}</td>
                    <td>
                        <button class="btn btn-primary" style="padding: 6px 12px; font-size: 14px;" onclick="viewStudent('${student.matricule}')">Voir</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function viewStudent(matricule) {
            const student = students.find(s => s.matricule === matricule);
            if (student) {
                // Créer une fenêtre modale avec les détails de l'étudiant
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                `;
                
                const modalContent = document.createElement('div');
                modalContent.style.cssText = `
                    background: white;
                    padding: 2rem;
                    border-radius: 10px;
                    max-width: 600px;
                    max-height: 80vh;
                    overflow-y: auto;
                `;
                
                modalContent.innerHTML = `
                    <h2>Fiche de l'Élève</h2>
                    <div style="margin-top: 1rem;">
                        <h3>Informations Personnelles</h3>
                        <p><strong>Matricule:</strong> ${student.matricule}</p>
                        <p><strong>Nom:</strong> ${student.prenom} ${student.nom}</p>
                        <p><strong>Date de Naissance:</strong> ${student.dateNaissance || 'N/A'}</p>
                        <p><strong>Sexe:</strong> ${student.sexe === 'M' ? 'Masculin' : 'Féminin'}</p>
                        <p><strong>Niveau:</strong> ${student.niveau}</p>
                        <p><strong>Nationalité:</strong> ${student.nationalite || 'N/A'}</p>
                        
                        <h3 style="margin-top: 1rem;">Informations Parents</h3>
                        <p><strong>Parent 1:</strong> ${student.parent1_nom || 'N/A'}</p>
                        <p><strong>Téléphone:</strong> ${student.parent1_telephone || 'N/A'}</p>
                        <p><strong>Email:</strong> ${student.parent1_email || 'N/A'}</p>
                        <p><strong>Adresse:</strong> ${student.parent1_adresse || 'N/A'}</p>
                        
                        <h3 style="margin-top: 1rem;">Services Souscrits</h3>
                        <p>${student.services && student.services.length > 0 ? student.services.join(', ') : 'Aucun service'}</p>
                        
                        <button class="btn btn-secondary" style="margin-top: 1rem;" onclick="this.closest('.modal').remove()">Fermer</button>
                    </div>
                `;
                
                modal.appendChild(modalContent);
                modal.classList.add('modal');
                document.body.appendChild(modal);
                
                // Fermer la modal en cliquant à l'extérieur
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
        }

        // Initialisation avec des données de démonstration
        function initDemoData() {
            if (students.length === 0) {
                const demoStudents = [
                    {
                        matricule: '240001',
                        prenom: 'Mohamed Al Amine',
                        nom: 'Ba',
                        sexe: 'M',
                        niveau: 'CI',
                        dateNaissance: '2018-03-15',
                        nationalite: 'Sénégalaise',
                        parent1_nom: 'Amadou Ba',
                        parent1_telephone: '77 123 45 67',
                        parent1_email: 'amadouba@email.com',
                        parent1_adresse: '516 Cité El Hadji Malick Sy Ouakam',
                        services: ['transport', 'cantine'],
                        dateInscription: new Date().toISOString(),
                        status: 'active'
                    },
                    {
                        matricule: '220055',
                        prenom: 'Mamadou',
                        nom: 'Niang',
                        sexe: 'M',
                        niveau: 'CE2',
                        dateNaissance: '2015-07-22',
                        nationalite: 'Sénégalaise',
                        parent1_nom: 'Papa Yatta Niang',
                        parent1_telephone: '78 234 56 78',
                        parent1_adresse: 'Cité Dalal Diam n° 39',
                        services: ['transport'],
                        dateInscription: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
                        status: 'active'
                    },
                    {
                        matricule: '180075',
                        prenom: 'Khadim Rassoul',
                        nom: 'Dieng',
                        sexe: 'F',
                        niveau: '4eme',
                        dateNaissance: '2010-11-08',
                        nationalite: 'Sénégalaise',
                        parent1_nom: 'Moussa Dieng',
                        parent1_telephone: '70 345 67 89',
                        services: ['cantine', 'taekwondo'],
                        dateInscription: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
                        status: 'active'
                    }
                ];
                
                students = demoStudents;
                localStorage.setItem('students', JSON.stringify(students));
            }
        }

        // Initialisation au chargement
        document.addEventListener('DOMContentLoaded', function() {
            initDemoData();
            updateProgressBar();
            updateButtons();
            
            // Ajouter l'événement pour le changement de niveau en réinscription
            document.getElementById('reinsc_nouveau_niveau').addEventListener('change', updateReinscriptionTotal);
        });

        // Export des données (pour sauvegarde)
        function exportData() {
            const dataStr = JSON.stringify(students, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `inscriptions_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Import des données
        function importData(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedStudents = JSON.parse(e.target.result);
                    students = importedStudents;
                    localStorage.setItem('students', JSON.stringify(students));
                    alert('Données importées avec succès!');
                    updateDashboard();
                } catch (error) {
                    alert('Erreur lors de l\'importation des données.');
                }
            };
            reader.readAsText(file);
        }
    </script>
</body>
</html>
